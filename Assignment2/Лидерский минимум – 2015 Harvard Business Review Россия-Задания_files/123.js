(function(e,h){function lb(a){"object"==typeof a.data&&a.data.hash&&(e.opener.postMessage("success","*"),K("hpmd_demo",a.data.hash,31536E3),e.location.reload())}if(!e.hpmd_initialized){e.hpmd_initialized=!0;var za=e.eval,p,L=function(a){return za("(function(hpmd){"+a+"})")},mb=p=".hpmdnetwork.ru",nb=[".mobilebanner.ru"],T=!1,X=null,Y="https://banner"+p,Aa="https:"==location.protocol?"https:":"http:",Z,l,Ba=null,F=[[]],Ca,$,M,aa=[],k,ba=null,z,v={view:[],expand:[],collapse:[],interstitial:[],native:[],
close:[]},w,Da=[],N={},x,y=0,ca=null,da=null,q,n=null,Ea,Fa,U=null,Ga,t,Ha,Ia=!!e.hpmd,r={},ea=null,O=!1,C=Ia?hpmd:[],A=function(a){a.method||(a.method="POST");a.url||(a.url=Aa+"//banner"+p+"/");a.data?"string"==typeof a.data?a.type||(a.type="application/x-www-form-urlencoded"):(a.data=JSON.stringify(a.data),a.type||(a.type="application/json")):a.data="";if(!a.forceAsync&&hpmd.sync)hpmd.syncb=hpmd.syncb||[],hpmd.syncb.push(function(b){a.success&&a.success.bind({json:b})()}),h.write('<script src="'+
a.url+"jsonp?n="+(hpmd.syncb.length-1)+"&p="+encodeURIComponent(a.data)+'">\x3c/script>');else{var b=new XMLHttpRequest;b.open(a.method,a.url,!0);b.withCredentials=!0;a.type&&b.setRequestHeader("Content-Type",a.type);a.success&&(b.onreadystatechange=function(){if(4==this.readyState){try{this.json=JSON.parse(this.responseText)}catch(b){this.json=null}a.success.bind(this).call()}});b.send(a.data)}},K=function(a,b,c){var d="";c&&(d="; expires="+(new Date((new Date).valueOf()+1E3*c)).toUTCString());h.cookie=
a+"="+b+"; path=/; domain="+z+d},Ja=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Ka=function(a){var b=new RegExp(mb.replace(/\./g,"\\."),"g");a.html=a.html.replace(b,p);a.css=a.css.replace(b,p);a.js=a.js.replace(b,p);return a},fa=function(a){aa.push(a)},La=function(){fa=function(a){a()};aa.map(function(a){try{a()}catch(b){}});aa=[]},ga=function(a){k=a;K("hpmd_uid2",k,31536E3);fa(function(){try{M.contentWindow.postMessage("hpmd.setuid"+k,"*")}catch(a){}})},Ma=function(a,
b){var c=[];if(!T&&a&&b){if(a.amberdata){e.adcm_config={id:1071,profileId:""+b,platformId:71,init:function(){e.adcm.call()}};var d=h.createElement("script");d.setAttribute("src","//tag.digitaltarget.ru/adcm.js");d.async=!0;h.querySelector("head").appendChild(d);c.push("amberdata")}a.aidata&&(d=h.createElement("img"),d.setAttribute("src","http://x01.aidata.io/0.gif?pid=HPMD&id="+b),d.style.cssText="position:absolute;left:-10000px;width:1px;height:1px",h.body.appendChild(d),c.push("aidata"));a.ga&&
1==a.ga.status&&(za(a.ga.code),P("capacity","full-capacity","site-"+l),O=!0);0<c.length&&A({forceAsync:!0,data:{method:"ad.dmp.sync",data:{dmp:c,uid:b}}})}},P=function(a,b,c){if(a&&b&&c){var d;d=-1==["video-progress"].indexOf(b)?!0:!1;d&&hpmd_a("send",{hitType:"event",eventCategory:a,eventAction:b,eventLabel:c})}},ob=function(a){w=a.positions.positions;x=a.positions.view;Ma(a.positions.use_data,a.positions.uid);var b=a.positions.uid;b&&ga(b);r=a.positions.segment||{};r.site=l;a.positions.config&&
a.positions.config.site&&($=a.positions.config.site);a.positions.positions[0].banner=a.get.banner;V(a.positions.positions,{})},sb=function(){if(e.hpmd_ss)ha(),Na();else{pb();var a=qb();A({data:{method:"ad.positions",data:{uid:k,site_id:l,section_id:Ba,url:location.href,new_session:rb(),demo:!!q||!!y,force_model:a}},success:function(){var a=this.json;if(a.success){w=a.data.positions;x=a.data.view;if(a.data.uid){var c=parseInt(a.data.uid);(!k||k>c)&&ga(c)}r=a.data.segment||{};r.site=l;a.data.config&&
a.data.config.site&&($=a.data.config.site);da=a.data.native}else w=[];w.map(function(a){if("teaser"==a.type||"fullscreen"==a.type)"auto"==a.mode?F[0].push(a):F.push([a])});F[0].length||F.shift();ha();Na();(!Fa||q||y)&&D();Ma(a.data.use_data,a.data.uid);1<y&&(a=h.createElement("script"),a.setAttribute("src","//misc"+(2==y?"-dev.hpmdnetwork.ru":".hpmd.local")+"/native/debug/merge.js?"+Math.random()),h.getElementsByTagName("head")[0].appendChild(a))}})}},ia=function(a){try{a()}catch(b){e.console&&console.log("hpmd: callback error:",
b)}},Na=function(){if(C.length)for(var a=0;a<C.length;a++)if(C[a])switch(typeof C[a]){case "string":0==C[a].indexOf("s/")&&(Ba=parseInt(C[a].substring(2,1E3)));break;case "function":ia(C[a])}},Oa=function(a,b){if("undefined"==typeof v[a])throw Error("Unknown event "+a);v[a].push(b)},Pa=function(a,b){if("undefined"==typeof v[a])throw Error("Unknown event "+a);for(var c=0;c<v[a].length;c++)v[a][c]===b&&(v[a][c]=null)},W=function(a,b){for(var c=0;c<v[a].length;c++)if(v[a][c])try{v[a][c](b)}catch(d){}},
Q=[],ja,ka=function(a){Q.push(a);if(1==Q.length){var b=function(){if(h.body){for(var a=0;a<Q.length;a++)Q[a]();Q=[]}else ja||(ja=setTimeout(function(){ja=null;b()},300))};b()}},la=[],Ra=function(){for(var a=0;a<la.length;a++)la[a]();Qa=function(a){a()}},Qa=function(a){la.push(a)},Sa=function(a,b){b||(b=U);b.hpmd.trackEvent("hpmd.js-exception",a.stack?{exception:{name:a.name,message:a.message,source:{file:a.fileName,line:a.lineNumber,char:a.columnNumber},stack:a.stack}}:{exception:{name:a.message?
a.message:a.error}});e.console&&console.log("hpmd.banner: error: ",a)},ma=h.write,tb=h.writeln,ub=h.open,vb=h.close,Ta="getElementsByTagName getElementsByTagNameNS getElementsByClassName querySelector querySelectorAll getElementById getElementsByName".split(" "),na={},oa={},wb=function(){if("loading"!=h.readyState)return!0;try{ma.call(h,'<ins id="hpmds-as"></ins>');var a=h.getElementById("hpmds-as");return a?(a.parentNode.removeChild(a),!1):!0}catch(b){return!0}},R,B,G,Ua,Va=function(a){try{Object.defineProperty(h,
"readyState",{configurable:!0,get:function(){return a}})}catch(b){h.readyState=a}},xb=function(a){R=a;G="";B=[];Wa(!0);h.write=function(a){wb()?G+=a:ma.call(h,a)};h.writeln=function(a){h.write(a+"\n")};h.open=function(){return this};h.close=function(){};(Ua="complete"==h.readyState)&&Va("interactive");Ta.map(function(a){na[a]=h[a];h[a]=function(){pa();return na[a].apply(this,[].slice.call(arguments))};oa[a]=Element.prototype[a];Element.prototype[a]=function(){pa();return oa[a].apply(this,[].slice.call(arguments))}})},
Wa=function(a){[].map.call(h.querySelectorAll("script"),function(b){b[(a?"add":"remove")+"EventListener"]("load",Xa);b[(a?"add":"remove")+"EventListener"]("error",Xa)})},pa=function(){var a=R.nextSibling;try{R.insertAdjacentHTML("afterend",G)}catch(b){}for(var c=R.nextSibling;c&&a!==c;)B.push(c),c=c.nextSibling;B.length&&(R=B[B.length-1]);G=""},yb=function(){h.write=ma;h.writeln=tb;h.open=ub;h.close=vb;if(Ua){Va("complete");var a=h.createEvent("Event");a.initEvent("readystatechange",!0,!0);h.dispatchEvent(a)}Ta.map(function(a){h[a]=
na[a];Element.prototype[a]=oa[a]});Wa(!1)},Xa=function(){G="";B.map(function(a){a.parentNode.removeChild(a)});B=[]},qa=!1,ra=[],zb=function(a,b){ra[b?"unshift":"push"](a);qa||Ya()},Ya=function(){ra.length?(qa=!0,ra.shift()()):qa=!1},Za=function(a,b,c){if(0<a.length){var d=a.shift(),f=d.hasAttribute("src"),g=h.createElement("script"),m=function(){Za(a,b,c)},e=function(a){if(-1!==c){var b;pa();yb();b=B}-1!==c?$a(g,b,m,null,!0):m();Ya()};g.addEventListener("load",e);g.addEventListener("error",e);for(var e=
d.attributes,u=0;u<e.length;u++)g.setAttribute(e[u].name,e[u].value);f||g.setAttribute("src","data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(d.innerHTML))));g.innerHTML=d.innerHTML;zb(function(){-1!==c&&xb(g);d.parentNode.replaceChild(g,d)},!0===c)}else b&&b()},Bb=function(a){var b=h.createElement("style");b.setAttribute("type","text/css");b.innerHTML=a;h.querySelector("head").appendChild(b);return b},Cb=function(a,b,c){var d=h.createElement("style");d.innerHTML=a;h.body.appendChild(d);
a=h.styleSheets[h.styleSheets.length-1];a.disabled=!0;ab(a,b,c);a.disabled=!1;return a},ab=function(a,b,c){for(var d=0,f=a.cssRules.length,g;d<f;){g=a.cssRules[d];if(g.type==g.STYLE_RULE){for(var m=["animationName","webkitAnimationName","msAnimationName","oAnimationName","mozAnimationName"],e=0;e<m.length;e++)g.style[m[e]]&&0!=g.style[m[e]].indexOf(c)&&(g.style[m[e]]=c+g.style[m[e]]);g=b+" "+g.selectorText.replace(/,/g,", "+b+" ")+"{"+g.style.cssText+"} ";a.deleteRule(d);a.insertRule(g,d)}else g.type==
g.KEYFRAMES_RULE||g.type==g.WEBKIT_KEYFRAMES_RULE||g.type==g.MOZ_KEYFRAMES_RULE||g.type==g.MS_KEYFRAMES_RULE?g.name=c+g.name:g.cssRules&&g.cssRules.length?ab(g,b,c):g.type==g.IMPORT_RULE&&(a.deleteRule(d),d--,f--);d++}},$a=function(a,b,c,d,f){var g,m;m=h.createElement("div");if("string"==typeof b)m.innerHTML=b;else for(;g=b.shift();)m.appendChild(g);for(b=[].concat([].slice.call(m.querySelectorAll("script")));0<m.childNodes.length;)g=m.childNodes[0],!0===f?(a.parentNode.insertBefore(g,a.nextSibling),
a=g):a.appendChild(g),d&&d(g);Za(b,c,f)},pb=function(){var a;if(a=/hpmd_demo=(\d+)\.([a-f0-9]{40})((\.\w+)+)?/.exec(h.cookie))q={banner_id:parseInt(a[1]),hash:a[2]},a[3]&&(q.extra=a[3].substring(1,1E3).split("."));if(a=/hpmd_demo=(\d+)\.([a-f0-9]{40})((\.\w+)+)?/.exec(location.href))q={banner_id:parseInt(a[1]),hash:a[2]},a[3]&&(q.extra=a[3].substring(1,1E3).split("."));if(a=/hpmd_bind_native=([0-3])/.exec(location.href))"0"==a[1]?K("hpmd_bind","",-86400):(y=parseInt(a[1]),K("hpmd_bind",a[1]));else if(a=
/hpmd_bind=([0-3])/.exec(h.cookie))y=parseInt(a[1])},qb=function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream){if(e.screen.height/e.screen.width==736/414&&3==e.devicePixelRatio)return"iPhone 6 Plus/6S Plus/7 Plus";if(e.screen.height/e.screen.width==667/375&&2==e.devicePixelRatio)return"iPhone 6/6S/7";if(1.775==e.screen.height/e.screen.width&&2==e.devicePixelRatio)return"iPhone 5/5C/5S";if(1.5==e.screen.height/e.screen.width&&2==e.devicePixelRatio)return"iPhone 4/4S";if(1.5==e.screen.height/
e.screen.width&&1==e.devicePixelRatio)return"iPhone 1/3G/3GS"}return null},rb=function(){if(null!==ba)return ba;var a;if(h.referrer){var b;a=(b=/\/\/([^\/]+)\//.exec(h.referrer))?b[1]==z||b[1].indexOf("."+z)==b[1].length-z.length-1?!1:!0:!1}else a=!0;b=!/hpmd_session=/.exec(h.cookie);K("hpmd_session","1",1800);return ba=a&&b},D=function(a,b,c){a?S(w.filter(function(b){return-1<a.indexOf(b.id)}),!0,b):(F.length&&S(F.shift()),c||w.filter(function(a){return"native"==a.type}).map(function(a){S([a])}))},
S=function(a,b,c){if(0!=a.length){c=c||{};var d=a[0];if("auto"==d.mode&&"native"!=d.type||"external-js"==d.mode&&b)sa(a,c);else{if(("auto"==d.mode||"system"==d.mode)&&"native"==d.type)if(!c||!c.selectors&&!c.element){var f=I(2);bb(function(){L(da)(f)})}else if(1<a.length){a.map(function(a){c.selectors[r.device_type]&&c.selectors[r.device_type][a.placement]&&(a.mode="selector",a.meta=c.selectors[r.device_type][a.placement],S([a],!1,c))});return}switch(d.mode){case "internal-js":case "system":b?sa(a,
c):L(d.meta)({ready:function(b){c.element=b;S(a,!0,c)},requestBanners:cb});break;case "html-markup":d.mode="selector",d.meta=".hpmds-position-"+d.id;case "selector":bb(function(){for(var b=[].slice.call(h.querySelectorAll(d.meta)),f=0;f<b.length;f++)d.already&&!d.multi||b[f].querySelector(".hpmds-slot")||(c.element=b[f],sa(a,c),d.already=!0)});break;case "link-click":ta(a,c,function(b){h.documentElement.addEventListener("click",function Ab(d){var f=d.target;if(f){var e=!1;do e="A"==f.tagName,e||(f=
f.parentNode);while(f&&!e);if(!(!e||f.hasAttribute("target")&&"_self"!=f.getAttribute("target")||!(f=f.getAttribute("href"))||-1<f.indexOf("#"))&&(Ca=f,h.documentElement.removeEventListener("click",Ab),V(a,c),b))return d.preventDefault(),d.stopPropagation(),b.allocateView(),b.hpmd.data.openBanner(),!1}})},!1);break;case "scroll":ta(a,c,function(){e.addEventListener("scroll",function m(){e.pageYOffset>1.2*e.innerHeight&&(e.removeEventListener("scroll",m),V(a,c))})})}}}},sa=function(a,b){ta(a,b,function(){V(a,
b)})},ua=[],va=!1,db=function(){var a=ua.shift();va=!0;a(function(){0==ua.length?va=!1:db()})},ta=function(a,b,c,d){if(0!=a.length){var f;if(n){var g=a.filter(function(a){return"fullscreen"==a.type&&"link-click"==a.mode&&"interstitial"==n.format||a.type==n.format});f=g.length?function(){A({data:{method:"ad.get",data:{uid:k,view:x,positions:[g[0].id],capacity:[],fixed_campaign_id:top.hpmd.fixed_campaign_id?top.hpmd.fixed_campaign_id:0,skip:[],imitate:{format:n.format,subformat:n.subformat}}},success:function(){var b=
JSON.parse(JSON.stringify(Ga));T&&(b=Ka(b));b.initializer=this.json.data.initializer||null;a[0].banner=b;c(b);if(this.json.data.unsupported&&n)n.onUnsupported(void 0)}})}:function(){c(null);D(null,null,!0)}}else f=function(f){A({forceAsync:"native"==a[0].type,data:{method:"ad.get",data:{uid:k,view:x,positions:a.filter(function(a){return a.avail}).map(function(a){return a.id}),capacity:d||b&&b.skipCapacity?[]:a.filter(function(a){return"link-click"!=a.mode&&"scroll"!=a.mode}).map(function(a){return a.id}),
fixed_campaign_id:top.hpmd.fixed_campaign_id?top.hpmd.fixed_campaign_id:0,demo:q,native:y,skip:Da,segments:ea}},success:function(){var d=this.json,g=!1;if(d.success){if(!d.data.supported&&n)n.onUnsupported(void 0);Ea=d.data.initializer;if(O)for(var e=0;e<a.length;++e)P("capacity",a[e].type+"-capacity","site-"+l);e=a[0];e.banner=d.data.banner||null;e.banner&&(T&&(e.banner=Ka(e.banner)),Da.push(e.banner.cid),N[e.banner.key]=e.banner,g=!0);c(e.banner);e.banner&&Ra()}else if(Ha=d,1002==d.error){if(n)n.onUnsupported(!0);
Ra()}f&&f();"native"==a[0].type||g||b&&"{}"!=JSON.stringify(b)||D(null,null,!0)}})};ua.push(f);va||db()}},V=function(a,b){var c=a[0],d=!!c.banner;q||(W("view",{positions:a.map(function(a){return{id:a.id,type:a.type,mode:a.mode,meta:a.meta,placement:a.placement}}),hasBanner:d,uid:k,context:b}),"native"==c.type&&W("native",{device_type:r.device_type,placement:c.placement,selector:c.meta,container:b.element,hasBanner:d}));var f=c.banner;switch(c.mode){case "link-click":case "scroll":A({forceAsync:!0,
data:{method:"ad.get",data:{uid:k,view:x,positions:[],capacity:[c.id],demo:null,native:0,skip:[]}}})}if(f){f.positions=a;f.context=b;var g;"native"==c.type&&(g=h.createElement("div"),g.setAttribute("id","hpmds-slot-"+f.id),g.classList.add("hpmds-slot"),b.onViewportUpdate&&(g.onViewportUpdate=b.onViewportUpdate),b.element.appendChild(g),b.element.style.display="block",b.element.style.visibility="visible",c.auto_size&&(g.style.position="relative",g.style.overflow="hidden",g.style.zIndex="1",g.style.paddingTop=
"1px",g.style.marginTop="-1px","tablet"==r.device_type?(g.style.margin="auto",g.style.width=e.innerWidth+"px",g.style.maxWidth=.75*e.innerWidth+"px"):(g.style.marginLeft=e.pageXOffset-g.getBoundingClientRect().left+"px",g.style.marginRight=e.innerWidth-g.getBoundingClientRect().right+e.pageXOffset+"px",g.style.width=e.innerWidth+"px",g.onViewportUpdate=function(){for(var a=0,b=0,c=g.parentNode;c&&c!==e;){try{var f=e.getComputedStyle(c),a=a+((parseFloat(f.getPropertyValue("padding-left").replace(/px$/,
""))||0)+(parseFloat(f.getPropertyValue("border-left").replace(/px$/,""))||0)+(parseFloat(f.getPropertyValue("margin-left").replace(/px$/,""))||0)),b=b+((parseFloat(f.getPropertyValue("padding-right").replace(/px$/,""))||0)+(parseFloat(f.getPropertyValue("border-right").replace(/px$/,""))||0)+(parseFloat(f.getPropertyValue("margin-right").replace(/px$/,""))||0))}catch(d){}c=c.parentNode}g.style.marginLeft=-a+"px";g.style.marginRight=-b+"px"})),f.slot=g);f&&!t&&(t=f,ha());f.allocateView=function(a){f.allocateView=
function(){};f.allocating=!0;if("number"!=typeof f.view){a={forceAsync:!0,data:{method:"ad.view",data:{position:f.position,uid:k,view_id:x,banner_id:f.id,buffer_id:f.view.id,hash:f.view.hash}},success:function(){!0===this.json.success&&(f.allocating=!1,f.allocated=!0,f.viewAllocated(),O&&P(f.subformat?f.subformat:f.format,"view","site-"+l))}};if(q||y)a.data.data.demo=!0;A(a)}};"native"!=f.format&&"interstitial"!=f.format&&f.allocateView();Db(f,g)}},Db=function(a,b){I(0,a);ka(function(){U||(U=a);a.nodes=
["native"==a.format?Cb(a.css,"#hpmds-slot-"+a.id,"#hpmds-slot-kf-"+a.id):Bb(a.css)];if("native"==a.format)switch(a.hpmd.getContainer=function(){return b},a.container=b,a.subformat){case "video-expanding":case "in-read":Eb(a)}if(b&&b.onViewportUpdate)b.onViewportUpdate();$a("native"==a.format?b:h.body,a.html,function(){var c=a.initializer||Ea;c&&L(c)(a.hpmd);try{L(a.js)(a.hpmd)}catch(d){if(a.imitation)a.onException(d);else Sa(d,a)}if("native"==a.format){switch(a.subformat){case "video-expanding":case "in-read":a.getUIConfig=
function(){if(a.expanded)return{height:Math.max(1,b.clientHeight)};var c;if(a.hpmd.data.ui&&"function"==typeof a.hpmd.data.ui.getConfig)try{c=a.hpmd.data.ui.getConfig()}catch(f){}"object"!=typeof c&&(c={});c.height||(c.height=Math.min(.5625*b.clientWidth,.6*e.innerHeight));c.height>.7*e.innerHeight&&(c.height=.7*e.innerHeight);return c};break;default:a.getUIConfig=function(){return{height:Math.max(1,b.clientHeight)}}}switch(a.subformat){case "video":var f=0;a.onVisibilityChange=function(b){eb(b,a)};
break;case "in-read":f=0;a.onVisibilityChange=function(b){b.visibility>=f&&(f=b.visibility,3<=f&&a.setPlaybackReady());3<=b.visibility&&(setTimeout(function(){a.expanded=!0},420),a.allocateView(),delete a.onVisibilityChange)};break;case "video-expanding":f=0,a.onVisibilityChange=function(b){b.visibility>f&&(f=b.visibility,3<=f&&(a.setPlaybackReady(),a.expanding=setTimeout(function(){a.expanded=!0;delete a.expanding},420)));(a.expanding||a.expanded)&&eb(b,a)}}Fb(a);Gb(b,a);ka(fb)}},function(b){a.nodes.push(b)},
!1)})},wa=[],bb=function(a){0==wa.length&&(h.addEventListener("DOMContentLoaded",gb),e.addEventListener("load",gb));wa.push(a);a()},gb=function(){wa.map(function(a){a()})},eb=function(a,b){2<=a.visibility&&!b.awaitingInitialization?b.awaitingInitialization=setTimeout(function(){delete b.onVisibilityChange;delete b.awaitingInitialization;b.allocateView()},2E3):2>a.visibility&&b.awaitingInitialization&&(clearTimeout(b.awaitingInitialization),delete b.awaitingInitialization)},Fb=function(a){var b=function(){var b=
e.pageXOffset,c=e.pageYOffset,d=b+e.innerWidth,h=c+e.innerHeight,u=a.getUIConfig().height,k=a.container.offsetLeft,H=a.container.offsetTop,l,n,p;for(l=a.container.offsetParent;l;)k+=l.offsetLeft,H+=l.offsetTop,l=l.offsetParent;l=k+a.container.offsetWidth;u=H+u;n=(k+l)/2;p=(H+u)/2;return H>h||u<c||k>d||l<b?0:p<c||p>h||n<b||n>d?1:k>=b&&l<=d&&H>=c&&u<=h?3:2},c=b(),d=function(){a.onVisibilityChange&&a.onVisibilityChange({visibility:c});try{a.hpmd.data.onVisibilityChange&&a.hpmd.data.onVisibilityChange({visibility:c})}catch(b){}};
e.addEventListener("scroll",function(){var a=b();c!=a&&(c=a,d())});d()},Eb=function(a){var b=[];a.hpmd.playbackReady=function(a){b.push(a)};a.setPlaybackReady=function(){a.hpmd.playbackReady=function(a){a()};b.map(function(a){try{a()}catch(b){}})}},cb=function(a){if(!q){var b=w.filter(function(b){return!a&&b.default?!0:a.positions&&-1==a.positions.indexOf(b.id)||a.except_format&&-1<a.except_format.indexOf(b.type)||a.formats&&-1==a.formats.indexOf(b.type)||a.format&&a.format!=b.type||a.format&&"interstitial"!=
a.format&&"link-click"==b.mode||a.formats&&-1==a.formats.indexOf("interstitial")&&"link-click"==b.mode?!1:!0});!a.selectors&&0<b.filter(function(a){return"native"==a.type&&"auto"==a.mode}).length&&(ca=a);a.segments&&(ea=a.segments);ea&&b.length==w.length?D(null,a):b.length&&D(b.map(function(a){return a.id}),a)}},Hb=function(){Fa=!0},Ib=function(a){var b=[],c=[],d=[];a.viewAllocated=function(){var f=a.hpmd;f.trackEvent=function(b,c){A({forceAsync:!0,data:{method:"ad.event",data:{banner_id:a.id,view:x,
uid:k,event:b,data:"undefined"==typeof c?null:c}},success:function(){O&&P(a.subformat?a.subformat:a.format,b,"site-"+l)}});if(a.pixels&&a.pixels[b])for(var d=a.pixels[b],f=function(a){var b=h.createElement("img");b.setAttribute("src",a.replace(/\{RND\}/g,function(){return Math.random()}));b.style.cssText="position:absolute;left:-10000px;width:1px;height:1px";h.body.appendChild(b)},g=0;g<d.length;g++)f(d[g])};f.trackLink=function(b,c,d,g){d||(d={});c=f.prepareLink(b,c,g);d.newWindow?e.open(c,d.name?
d.name:null,d.specs?d.specs:null,!!d.replace):location.href=c;O&&P(a.subformat?a.subformat:a.format,b,"site-"+l)};f.prepareLink=function(b,c,d){b=Aa+"//banner"+p+"/track/event?uid="+k+"&banner_id="+a.id+"&view="+x+"&event="+encodeURIComponent(b)+"&redirect_uri="+encodeURIComponent(c)+"&url="+encodeURIComponent(location.href.toString());d="undefined"==typeof d?null:d;null!==d&&(b+="&data="+encodeURIComponent(JSON.stringify(d)));return b};f.link=function(b){var c=arguments;b=b||0;var d;a.links&&(d=
a.links[b]);d||(d="http://www"+p+"/");d=d.replace(/\{RND\}/g,function(){return Math.random()});d=d.replace(/\{(\d+)\}/g,function(a,b){return b<c.length?c[b]:a});f.trackLink("hpmd.link"+b,d,{newWindow:!0})};f.ready=function(a){a()};f.asyncPrepareLink=function(a,b,d){arguments[arguments.length-1](f.prepareLink.apply(this,[].slice.call(arguments,0,arguments.length-1)))};for(var g=0;g<b.length;g++)f.trackEvent.apply(this,b[g]);for(g=0;g<c.length;g++)f.trackLink.apply(this,c[g]);for(g=0;g<d.length;g++)d[g]();
d=c=b=null};a.hpmd.trackEvent=function(){b.push([].slice.call(arguments))};a.hpmd.trackLink=function(){c.push([].slice.call(arguments))};a.hpmd.prepareLink=function(){throw Error("hpmd.banner: this banner has not been initialized yet");};a.hpmd.ready=function(a){d.push(a)};a.hpmd.asyncPrepareLink=function(){var b=[].slice.call(arguments);a.hpmd.ready(function(){a.hpmd.asyncPrepareLink.apply(this,b)})}},xa=function(a){return r[a]},I=function(a,b){switch(a){case 3:var c={push:ia,events:{add:Oa,remove:Pa,
fire:function(a,b){W(a,b)}},passback:function(a){N[a]&&hb(N[a])},convert:function(a){N[a]&&N[a].hpmd.trackEvent("hpmd.click")},requestBanners:cb,mute:Hb,receive:ob,INITIALIZED:!0,sync:e.hpmd&&hpmd.sync,syncb:e.hpmd?e.hpmd.syncb||[]:[]};Z&&(c.registerException=Sa,c.getBannerInfo=function(a){Qa(function(){a(U,Ha)})},c.getUid=function(a){return k});return c;case 0:return b.hpmd={data:{},getSegment:xa,getStylesheet:function(){return b.nodes[0].sheet},passback:function(){hb(b)},convert:function(){b.hpmd.trackEvent("hpmd.click")},
push:ia,events:{add:Oa,remove:Pa,fire:function(a,c){if("close"==a)if("interstitial"==b.format)location.href=Ca;else{try{b.hpmd.data.destroy()}catch(g){}try{for(var e=0;e<b.nodes.length;e++)try{b.nodes[e].parentNode.removeChild(b.nodes[e])}catch(h){}}catch(k){}}else W(a,c)}}},Ib(b),function(a){var b=L($)();a.getConfig=function(){return b}}(b.hpmd),l||(b.hpmd.setSegments=function(a){r=a}),b.hpmd;case 2:return{getSegment:xa,slotReady:function(a){var b=w.filter(function(b){return"native"==b.type&&("auto"==
b.mode||"system"==b.mode)&&b.placement==a.attributes.placement});if(0<b.length){b[0].mode="system";var c=JSON.parse(JSON.stringify(ca))||{};c.element=a.container;c.onViewportUpdate=a.onViewportUpdate;D([b[0].id],c)}},context:ca}}},ha=function(){if(Ia&&(!e.hpmd||!e.hpmd.INITIALIZED)&&(Z?(hpmd=t?t.hpmd:l?I(3):I(0,{}),hpmd.initializeInterstitial=function(){initializeInterstitial({hpmd:hpmd})},q&&(hpmd.getViewId=function(){return t.view}),hpmd.imitate=function(a,c){Ga={id:1,cid:1,html:a.html,css:a.css,
js:a.js,format:a.format,subformat:a.subformat,placement:a.placement,imitation:!0,onException:a.onException,onUnsupported:a.onUnsupported,view:1};c&&c()},hpmd.imitatePlugins=function(a){da=a.js},hpmd.imitateFormat=function(a,c,d){n={format:a,subformat:c,onUnsupported:d}}):hpmd=I(3),y)){if(t)hpmd.trackEvent=t.hpmd.trackEvent,hpmd.trackLink=t.hpmd.trackLink,hpmd.prepareLink=t.hpmd.prepareLink,hpmd.asyncPrepareLink=t.hpmd.asyncPrepareLink;else{var a={data:{id:0}};I(0,a);hpmd.trackEvent=a.hpmd.trackEvent;
hpmd.trackLink=a.hpmd.trackLink;hpmd.prepareLink=a.hpmd.prepareLink;hpmd.asyncPrepareLink=a.hpmd.asyncPrepareLink}hpmd.getSegment=xa}},ya=function(){var a={left:h.documentElement.scrollLeft?h.documentElement.scrollLeft:h.body.scrollLeft,top:h.documentElement.scrollTop?h.documentElement.scrollTop:h.body.scrollTop};a.right=a.left+e.innerWidth;a.bottom=a.top+e.innerHeight;return a},s,ib=function(a){for(var b,c,d,f,e=0;e<J.length;e++)if(E[e].allocateView)switch(E[e].subformat){case "video":case "video-expanding":case "in-read":break;
default:f=J[e];var h=d=0;b=f;do d+=b.offsetLeft,h+=b.offsetTop,b=b.offsetParent;while(b);b=d;c=h;d+=f.clientWidth;f=h+f.clientHeight;a.right>=b&&a.left<=d&&a.bottom>=c&&a.top<=f&&E[e].allocateView()}},fb=function(){s||(s=ya());return ib(s)},jb=function(){var a=ya();s||(s=ya());if(a.left!=s.left||a.right!=s.right||a.top!=s.top||a.bottom!=s.bottom){var b;b=s;b={left:Math.min(b.left,a.left),right:Math.max(b.right,a.right),top:Math.min(b.top,a.top),bottom:Math.max(b.bottom,a.bottom)};ib(b);s=a}},kb,J=
[],E=[],Gb=function(a,b){E.push(b);J.push(a);if(b.data&&b.data.onViewportUpdate)b.data.onViewportUpdate();if(!kb){fb();kb=!0;var c=e.innerWidth,d=function(a){if(a||c!=e.innerWidth){c=e.innerWidth;for(a=0;a<J.length;a++)if(J[a].onViewportUpdate)J[a].onViewportUpdate();for(a=0;a<E.length;a++)if(E[a].hpmd.data.onViewportUpdate)E[a].hpmd.data.onViewportUpdate();jb()}};setInterval(d,300);e.addEventListener("orientationchange",function(){d(!0)},!1);e.addEventListener("resize",function(){d()},!1)}},hb=function(a){var b=
function(){A({data:{method:"ad.passback",data:{uid:k,view:x,banner_id:a.id}}})};if(a.allocated)b();else{var c=a.viewAllocated;a.viewAllocated=function(){b();c&&c.bind(this)()};a.allocating||a.allocateView()}a.slot&&a.slot.parentNode.removeChild(a.slot);a.context.skipCapacity=!0;D(a.positions.map(function(a){return a.id}),a.context)};e.addEventListener("message",lb);(function(){var a=1,b=location.host.split(".").length,c;do{z=location.host.split(".").splice(b-a,b).join(".");c=z+":"+Math.random();h.cookie=
"hpmd_cd="+c+"; path=/; domain="+z;if(-1<h.cookie.indexOf("hpmd_cd="+c))return;a++}while(a<=b);z=location.host})();(function(){for(var a=h.getElementsByTagName("script"),b=new RegExp("^(?:https?:)?//[^/]*"+Ja(p)),c=new RegExp("^(?:https?:)?//[^/]*("+nb.map(Ja).join("|")+")"),d=0;d<a.length;d++)if(a[d].hasAttribute("src"))if(a[d].hasAttribute("data-external")){var e=a[d].getAttribute("src").match(c);e&&(e=e[1],X=a[d],p=e,Y="http://banner"+p,T=!0)}else a[d].getAttribute("src").match(b)&&(X=a[d])})();
(function(a){null!==a&&(a=a.getAttribute("src"),(a=/client\/(\d+)\.(min\.)?js/.exec(a))&&a[1]&&(l=parseInt(a[1]),Z=-1<[50,51,52].indexOf(l)))})(X);fa(function(){sb()});(function(a){if(a=/hpmd_uid2=(\d+)(;|$)/.exec(h.cookie))k=parseInt(a[1]);hpmd.sync?La():(e.addEventListener("message",function(a){a.origin==Y&&"hpmd.uid"==a.data.substring(0,8)&&(a=parseInt(a.data.substring(8)),!isNaN(a)&&a<k&&(k=a),k&&ga(k),La())}),M=h.createElement("iframe"),M.style.cssText="position:absolute;left:-100px;top:-100px;width:1px;height:1px;",
M.setAttribute("src",Y+"/track/handler1.html"),ka(function(){h.body.appendChild(M)}))})();e.addEventListener("scroll",jb,!1)}})(window,document);